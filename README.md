# 🚗 InSpectra - 自動車状態監視サービス プロトタイプ

**InSpectra**は、自動車の状態をリアルタイムで監視・管理するための統合プラットフォームです。企業ダッシュボードとエンドユーザーアプリの2つのインターフェースを備えています。

## 📁 プロジェクト構成

```
プロトタイプ/
├── index.html              # ①管理ダッシュボード（企業向け）
├── detail.html             # ②車両詳細情報ページ（企業向け）
├── user-home.html          # ③マイカー状態ホーム（ユーザー向け）
├── user-alert.html         # ④異常詳細画面（ユーザー向け）
├── css/
│   ├── style.css           # 管理画面用スタイル
│   └── user-page.css       # ユーザーアプリ用スタイル
├── js/
│   ├── utils.js            # 共通ユーティリティ関数
│   ├── dashboard.js        # 管理ダッシュボード用スクリプト
│   ├── detail.js           # 車両詳細ページ用スクリプト
│   ├── user-home.js        # ユーザーホーム画面用スクリプト
│   └── user-alert.js       # 異常詳細画面用スクリプト
├── data/
│   ├── vehicles.json        # 車両一覧データ
│   ├── detail_CUST*.json   # 顧客別車両詳細データ（複数）
│   ├── user_vehicle.json   # ユーザー車両データ
│   └── alert_detail.json   # 異常詳細データ
├── img/
│   ├── admin.png           # 管理者プロフィール画像
│   ├── vehicle.png         # 車両イラスト
│   └── CAR001.svg          # 車両ID表示用SVG
└── README.md               # このファイル
```

## 🚀 使い方

### 1. ローカルサーバーで起動

JSONファイルの読み込みに対応するため、ローカルサーバーが必要です。

#### Pythonを使用する場合：
```bash
# Python 3の場合
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

#### Node.jsを使用する場合：
```bash
# http-serverをインストール
npm install -g http-server

# サーバーを起動
http-server -p 8000
```

#### VS Codeを使用する場合：
「Live Server」拡張機能をインストールして、HTMLファイルを右クリック→「Open with Live Server」を選択

### 2. ブラウザでアクセス

以下のURLにアクセスしてください：

**管理画面（企業向け）：**
- `http://localhost:8000/index.html` - ダッシュボード
- `http://localhost:8000/detail.html?customerId=CUST001` - 車両詳細（顧客ID指定）

**ユーザーアプリ（エンドユーザー向け）：**
- `http://localhost:8000/user-home.html` - マイカー状態
- `http://localhost:8000/user-alert.html` - 異常詳細

## 📱 画面説明

### ① 管理ダッシュボード（企業向け）
**URL:** `index.html`

企業の管理者向けダッシュボード。複数の車両を一元管理できます。

**主な機能：**
- **KPIカード**: 注意車両数、緊急対応必要数、検査ゲート稼働状況を一目で把握
- **整備優先度リスト**: リスクスコア順に車両を表示、検索・フィルタリング機能搭載
- **ステータスフィルター**: 正常/注意/異常の3段階でフィルタリング
- **CSVエクスポート**: テーブルデータをCSV形式でダウンロード可能
- **異常傾向グラフ**: 過去7週間の異常車両の推移を可視化
- **ページング**: 大量データに対応したページ分割表示
- **ユーザー情報**: 管理者プロフィールとシステムステータス表示
- **リアルタイム更新**: 最終更新時刻を自動更新

### ② 車両詳細ページ（企業向け）
**URL:** `detail.html?customerId={CUST_ID}`

特定の車両について詳細情報を確認できます。

**主な機能：**
- **車両情報パネル**: 顧客ID、顧客名、車種、走行距離、最終検査日を表示
- **部品状態表示**: 5つの主要部品（エンジン、ブレーキ、バッテリー、タイヤ、エアコン）の状態を視覚的に表示
- **部品の詳細情報**: 各部品の状態レベル（良好/中度/重度）と詳細説明を表示
- **リスク推移グラフ**: 過去30日間のリスクスコアの変動をグラフ化
- **整備履歴**: 過去の整備内容とステータスを一覧表示
- **アクションボタン**: AI再診断、ダッシュボード戻るボタン

### ③ マイカー状態（ユーザー向け）
**URL:** `user-home.html`

エンドユーザーが自分の車両の状態を確認できる画面です。

**主な機能：**
- **健康スコアメーター**: 円形ゲージで車両の総合健康状態を0～100点で表示（色で直感的に判定）
  - 🟢 70点以上: 良好
  - 🟡 50～69点: 注意
  - 🔴 50点未満: 異常
- **車両イラスト**: 各部品の状態を色分け表示
- **異常検知通知**: 警告が必要な部品を一覧表示
- **アクションボタン**: 詳細情報閲覧、整備予約

### ④ 異常詳細画面（ユーザー向け）
**URL:** `user-alert.html`

検知された異常について詳細情報とAIからの診断を表示します。

**主な機能：**
- **異常概要**: 対象部品、異常内容、検出日時を表示
- **AI診断コメント**: 複数の異常に対応した専門的な診断テキスト
- **推奨アクション**: 異常レベルに応じた対応方法を提示
  - エラーレベル（赤）: 即座の対応が必要
  - 警告レベル（黄）: 早期対応を推奨
- **リスク推移グラフ**: 同一部品の過去のリスク変動を表示
- **予約ボタン**: 近隣工場の検索・予約、整備記録確認

## 🎨 技術スタック

| 技術 | 用途 |
|------|------|
| **HTML5** | 構造・マークアップ |
| **CSS3** | スタイリング（レスポンシブ対応） |
| **JavaScript ES6+** | インタラクティブ機能・DOM操作 |
| **Chart.js** | グラフ・チャート描画（CDN経由） |
| **Font Awesome 6.4** | アイコン表示（CDN経由） |
| **JSON** | データ形式 |

## 📊 データ構造

### vehicles.json
管理ダッシュボードで表示される車両一覧。以下の情報を含みます：
```json
{
  "customerId": "CUST001",
  "customerName": "山田 太郎",
  "vehicleId": "CAR001",
  "name": "Prius",
  "status": "warning",
  "risk": 75,
  "lastCheck": "2025-10-30",
  "lat": 35.6,
  "lng": 139.7
}
```

### detail_CUST*.json
顧客ごとの車両詳細データ。以下の情報を含みます：
```json
{
  "customerId": "CUST001",
  "customerName": "山田 太郎",
  "vehicleId": "CAR001",
  "vehicleName": "Prius",
  "distance": 42000,
  "lastCheck": "2025-10-30",
  "status": "warning",
  "risk": 75,
  "parts": {
    "engine": { "status": "normal", "level": "良好", "detail": "...", "severity": 0 },
    "brake": { "status": "warning", "level": "中度", "detail": "...", "severity": 2 },
    "battery": { "status": "error", "level": "重度", "detail": "...", "severity": 3 },
    "tire": { "status": "normal", "level": "良好", "detail": "...", "severity": 0 },
    "aircon": { "status": "normal", "level": "良好", "detail": "...", "severity": 0 }
  },
  "riskHistory": [40, 45, 50, 55, 65, 70, 75],
  "maintenance": [
    { "date": "2025-09-01", "task": "オイル交換", "status": "完了" }
  ]
}
```

### user_vehicle.json
ユーザー向け表示用の車両データ：
```json
{
  "id": "CAR001",
  "name": "Prius",
  "score": 75,
  "parts": {
    "engine": "normal",
    "brake": "warning",
    "battery": "error",
    "tire": "normal",
    "aircon": "normal"
  }
}
```

### alert_detail.json
異常に関する詳細情報：
```json
{
  "part": "brake",
  "alert": "ブレーキシステム異常",
  "detected": "2025-10-30 14:30",
  "comment": "ブレーキパッドの磨耗が進行しています...",
  "recommend": "近日中に整備工場で点検・交換をお願いします",
  "history": [45, 50, 55, 60, 65]
}
```

## 🔧 カスタマイズ

### データの変更
`data/`フォルダ内のJSONファイルを編集することで、表示データを変更できます。

**既存の顧客データを追加する場合：**
1. `data/detail_CUST001.json`を参考に、新しい`data/detail_CUST{新ID}.json`を作成
2. URLに`?customerId=CUST{新ID}`を追加してアクセス

### スタイルの変更
- **管理画面用**: `css/style.css`を編集
- **ユーザーアプリ用**: `css/user-page.css`を編集

### カラーテーマ
`style.css`の`:root`セクションで定義されたCSS変数を変更することで、全体的なカラースキームを調整できます：
```css
:root {
  --primary: #667eea;
  --secondary: #764ba2;
  --danger: #ef4444;
  --warning: #f59e0b;
  --success: #10b981;
  /* ... */
}
```

## ✨ 主な特徴

✅ **レスポンシブデザイン**: デスクトップとモバイルの両方に対応  
✅ **ダークモード対応可能**: CSS変数を活用して実装可能  
✅ **パフォーマンス最適化**: 軽量なJSONデータ形式  
✅ **アクセシビリティ**: Font Awesomeアイコンで視認性向上  
✅ **拡張性**: JSONスキーマに基づいた機能追加が容易  

## 📝 重要な注意事項

- ⚠️ **プロトタイプです**: このプロトタイプはデモ・プレゼンテーション用です。本番環境では適切なバックエンドAPIと連携してください
- 🗺️ **地図表示**: Google Maps APIは使用していません。本番環境での地図機能はAPIの統合が必要です
- 📁 **静的データ**: データは静的なJSONファイルから読み込んでいます。リアルタイム同期にはWebSocket等の実装が必要です
- 🔐 **セキュリティ**: 本番環境ではユーザー認証、データ暗号化、HTTPS通信などのセキュリティ対策が必須です

## 🤝 今後の拡張案

- リアルタイムデータ更新（WebSocket/Server-Sent Events）
- ユーザー認証機能
- バックエンド API連携
- Google Maps / Mapbox統合
- プッシュ通知機能
- モバイルアプリ化（React Native等）
- AI診断ロジックの実装
- データベース連携

---

**最終更新**: 2026年1月  
**バージョン**: 1.0.0





